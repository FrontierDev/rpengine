-- RPE/Data/Default5e.lua
-- Default 5e dataset - always present, cannot be deleted

RPE = RPE or {}
RPE.Data = RPE.Data or {}

-- Stat definitions for 5e (D&D Fifth Edition)
local STATS_5E = {
    -- --- Resources ---
    ACTION = {
        name    = "Actions",
        category = "RESOURCE",
        base    = 1,
        min     = 0,
        max     = 1,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\action.png",
        visible = 0,
        pct     = 0,
        recovery = { ruleKey = "action_regen", default = 1 },
        sourceDataset = "Default5e",
    },
    BONUS_ACTION = {
        name    = "Bonus Actions",
        category = "RESOURCE",
        base    = 1,
        min     = 0,
        max     = 1,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\bonus_action.png",
        visible = 0,
        pct     = 0,
        recovery = { ruleKey = "bonusaction_regen", default = 1 },
        sourceDataset = "Default5e",
    },
    REACTION = {
        name    = "Reactions",
        category = "RESOURCE",
        base    = 1,
        min     = 0,
        max     = 1,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\reaction.png",
        visible = 0,
        pct     = 0,
        recovery = { ruleKey = "reaction_regen", default = 1 },
        sourceDataset = "Default5e",
    },
    MAX_HEALTH = {
        name    = "Max Health",
        category = "RESOURCE",
        base    = 120,
        min     = 0,
        max     = math.huge,
        visible = 0,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\health.png",
        sourceDataset = "Default5e",
    },
    HEALTH = {
        name    = "Hitpoints",
        category = "RESOURCE",
        base    = { ref = "MAX_HEALTH", default = 0 },
        min     = 0,
        max     = { ref = "MAX_HEALTH" },
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\health.png",
        tooltip = "Your current hitpoints. If this reaches 0, you are knocked out.\\n\\nYour maximum health is $stat.MAX_HEALTH$.",
        recovery = { ruleKey = "health_regen", default = 0 },
        sourceDataset = "Default5e",
    },
    MAX_HOLY_POWER = {
        name    = "Max Holy Power",
        category = "RESOURCE",
        base    = 3,
        visible = 0,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\mana.png",
        sourceDataset = "Default5e",
    },
    HOLY_POWER = {
        name    = "Holy Power",
        category = "RESOURCE",
        base    = 0,
        min     = 0,
        max     = { ref = "MAX_HOLY_POWER" },
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\mana.png",
        tooltip = "Divine power used to perform powerful Paladin-specific spells.",
        sourceDataset = "Default5e",
    },
    MAX_MANA = {
        name    = "Max Mana",
        category = "RESOURCE",
        base    = { ruleKey = "max_mana", default = 100 },
        visible = 0,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\mana.png",
        sourceDataset = "Default5e",
    },
    MANA = {
        name    = "Mana",
        category = "RESOURCE",
        base    = 75,
        min     = 0,
        max     = { ref = "MAX_MANA" },
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\mana.png",
        tooltip = "Your current mana. Used to power spells and abilities.\\n\\nYour maximum mana is $stat.MAX_MANA$.",
        recovery = { ruleKey = "mana_regen", default = 0 },
        sourceDataset = "Default5e",
    },
    -- --- Primary stats (Abilities) ---
    STR = {
        name    = "Strength",
        category = "PRIMARY",
        base    = 10,
        min     = -math.huge,
        max     = math.huge,
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\str.png",
        itemTooltipFormat = "$value$ Strength",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 100,
        itemLevelWeight = 230,
        sourceDataset = "Default5e",
    },
    DEX = {
        name    = "Dexterity",
        category = "PRIMARY",
        base    = 10,
        min     = -math.huge,
        max     = math.huge,
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\agi.png",
        itemTooltipFormat = "$value$ Dexterity",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 100,
        itemLevelWeight = 230,
        sourceDataset = "Default5e",
    },
    CON = {
        name    = "Constitution",
        category = "PRIMARY",
        base    = 10,
        min     = -math.huge,
        max     = math.huge,
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\sta.png",
        itemTooltipFormat = "$value$ Constitution",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 100,
        itemLevelWeight = 230,
        sourceDataset = "Default5e",
    },
    INT = {
        name    = "Intelligence",
        category = "PRIMARY",
        base    = 10,
        min     = -math.huge,
        max     = math.huge,
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\int.png",
        itemTooltipFormat = "$value$ Intelligence",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 100,
        itemLevelWeight = 230,
        sourceDataset = "Default5e",
    },
    WIS = {
        name    = "Wisdom",
        category = "PRIMARY",
        base    = 10,
        min     = -math.huge,
        max     = math.huge,
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\spi.png",
        itemTooltipFormat = "$value$ Wisdom",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 100,
        itemLevelWeight = 230,
        sourceDataset = "Default5e",
    },
    CHA = {
        name    = "Charisma",
        category = "PRIMARY",
        base    = 10,
        min     = -math.huge,
        max     = math.huge,
        visible = 1,
        pct     = 0,
        icon    = "Interface\\Addons\\RPEngine\\UI\\Textures\\cha.png",
        itemTooltipFormat = "$value$ Charisma",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 100,
        itemLevelWeight = 230,
        sourceDataset = "Default5e",
    },
    -- --- Defense ---
    AC = {
        name = "Armor Class",
        category = "SECONDARY",
        base = 10,
        min  = 0,
        max  = math.huge,
        pct  = 0,
        visible = true,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\healed_last.png",
        itemTooltipFormat = "$value$ AC",
        itemTooltipColor = {1, 1, 1},
        itemTooltipPriority = 99,
        sourceDataset = "Default5e",
    },
    -- --- Secondary / Skills ---
    ACROBATICS = {
        name = "Acrobatics",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    ANIMAL_HANDLING = {
        name = "Animal Handling",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    ARCANA = {
        name = "Arcana",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    ATHLETICS = {
        name = "Athletics",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    DECEPTION = {
        name = "Deception",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    HISTORY = {
        name = "History",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    INSIGHT = {
        name = "Insight",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    INTIMIDATION = {
        name = "Intimidation",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    INVESTIGATION = {
        name = "Investigation",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    MEDICINE = {
        name = "Medicine",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    NATURE = {
        name = "Nature",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    PERCEPTION = {
        name = "Perception",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    PERFORMANCE = {
        name = "Performance",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    PERSUASION = {
        name = "Persuasion",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    RELIGION = {
        name = "Religion",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    SLEIGHT_OF_HAND = {
        name = "Sleight of Hand",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    STEALTH = {
        name = "Stealth",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
    SURVIVAL = {
        name = "Survival",
        category = "SKILL",
        base = 0,
        min  = -math.huge,
        max  = math.huge,
        visible = 1,
        pct  = 0,
        icon = "Interface\\Addons\\RPEngine\\UI\\Textures\\spell.png",
        sourceDataset = "Default5e",
    },
}


local ITEMS_5E = {
    -- Weapon: Longsword
    longsword_5e = {
        id = "longsword_5e",
        name = "Longsword",
        category = "EQUIPMENT",
        icon = 135324, -- INV_Sword_27
        stackable = false,
        maxStack = 1,
        basePriceU = 19.5,
        vendorSellable = true,
        description = "A versatile blade favored by knights and adventurers.",
        rarity = "common",
        tags = { "melee", "sword", "weapon" },
        data = {
            slot = "weapon",
            swingCost = "Action",
            hand = "One Hand",
            weaponType = "Sword",
            minDamage = 1,
            maxDamage = 10,
            damageSchool = "Physical"
        },
    },
    -- Chest: Chainmail Armor
    chainmail_armor_5e = {
        id = "chainmail_armor_5e",
        name = "Chainmail Armor",
        category = "EQUIPMENT",
        icon = 132624, -- INV_Chest_Chain_05
        stackable = false,
        maxStack = 1,
        basePriceU = 17.75,
        vendorSellable = true,
        description = "Sturdy armor offering solid protection.",
        rarity = "common",
        tags = { "armor", "heavy", "chest" },
        data = {
            slot = "chest",
            armorType = "Heavy",
            stat_AC = 6,
        },
    },
}

local function MergeTables(t1, t2)
    local result = {}
    if t1 then for k, v in pairs(t1) do result[k] = v end end
    if t2 then for k, v in pairs(t2) do result[k] = v end end
    return result
end

RPE.Data.Default5e = {
    name = "Default5e",
    version = 1,
    author = "RPEngine",
    notes = "Default 5e (D&D Fifth Edition) dataset. Cannot be deleted.",
    guid = "Default5e-system",
    createdAt = 0,
    updatedAt = 0,
    items = MergeTables(ITEMS_5E, RPE.Data.Default.REAGENTS_COMMON),
    spells = {},
    auras = {},
    npcs = {},
    extra = {
        stats = STATS_5E,
        interactions = RPE.Data.Default.INTERACTIONS_COMMON,
    },
}

return RPE.Data.Default5e
